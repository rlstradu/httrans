=========================================
subpandaTM v1.1.3 - Glossary Editing Functionality
=========================================

Release Date: November 14, 2025
This version introduces a key quality-of-life feature that simplifies glossary management by allowing direct modification of existing term pairs.

New Features & Improvements
In-Place Glossary Editing: Users can now modify any term in the glossary without having to delete and re-add it for minor corrections.

A new **"Edit"** button is displayed next to the **"Delete"** button for every glossary entry.

Clicking **"Edit"** automatically loads the source and target terms into the main **Add Term** form, reusing the existing interface for a seamless experience.

The **"Add term"** button is temporarily replaced with a **"Save changes"** button, which, when pressed, updates the existing entry and automatically resets the form.

=========================================
subpandaTM v1.1.2 - Visual CPS Feedback
=========================================

Release Date: October 24, 2025
This version introduces a highly requested visual aid for translation quality control.

New Features & Improvements
Visual CPS Progress Bar: A thin, interactive bar is now displayed below the translation editor for each subtitle, offering immediate feedback on reading speed.

The bar fills dynamically based on the current Characters Per Second (CPS) rate.

A limit marker indicates the maximum CPS configured in the QA settings.

The bar changes color from green to red when the calculated CPS exceeds the set limit, providing an instant visual warning.

=========================================
subpandaTM v1.1.1 - Waveform Integration & Advanced Timecode Control
=========================================

Release Date: October 22, 2025

This version introduces a major new feature: an interactive audio waveform display powered by Wavesurfer.js. It also significantly enhances timecode management with FPS settings, frame-based display, and improved editing precision, along with UI refinements like a persistent status bar.

## New Features & Improvements

* **Audio Waveform Integration**:
    * A **visual audio waveform** now appears below the video player when a video is loaded.
    * Subtitles are displayed as **interactive regions** on the waveform.
    * Region Content: Each region shows subtitle number, original/translation text preview, and key stats (CPS, line lengths).
    * **Click to Navigate**: Clicking a region jumps the video and editor focus to that subtitle.
    * **Drag & Resize Timing**: Drag regions or their handles to visually adjust subtitle start/end times (can be locked). Changes are reflected in the editor and are undoable.
    * **Waveform Controls**: New controls added below the waveform:
        * **Lock/Unlock**: Prevent accidental timing changes.
        * **Zoom In/Out**: Adjust the waveform's horizontal zoom level.
        * **Follow Playback**: Toggle mode where the waveform scrolls automatically, and the active subtitle region/editor unit is highlighted/focused during video playback.

* **Advanced Timecode Management**:
    * **Project FPS Settings**: A new "Timecode Settings" option under the "Tools" menu opens a modal to define the project's Frames Per Second (FPS).
    * **Frame-Based Display**: Option in Timecode Settings to display and edit timecodes in `HH:MM:SS:FF` format (SRT export remains in milliseconds for compatibility).
    * **Frame-Accurate Nudging**: Timecode nudge buttons now adjust timing by exactly one frame based on the set project FPS.
    * **Undo/Redo for Time Changes**: All timing adjustments (manual input, nudging, waveform region manipulation) are now correctly tracked in the Undo/Redo history.

* **UI & UX Enhancements**:
    * **Persistent Status Bar**: Replaces the collapsible Statistics panel with a permanent bar at the bottom displaying progress, word counts, and QA status. Can be toggled via the "Tools" menu.
    * **Improved Playback Tracking**: Editor focus and highlighting now reliably follow video playback when "Follow Playback" is enabled.
    * **Refined Play Segment Behavior**: The "Play Segment" action (and shortcut) now plays precisely until the subtitle's end time.
    * Improved active/hover states for toggle buttons.

* **Bug Fixes**:
    * **Split Subtitle Gap**: The "Split" function now correctly calculates and inserts a 2-frame gap based on the project FPS.

=========================================
subpandaTM v1.1.0 - AI Assistant, Editor Tools & Major UX Overhaul
=========================================

Release Date: October 17, 2025

This major update introduces powerful new subtitle editing tools, a comprehensive Undo/Redo system, a project planner, an AI Assistant for translation suggestions, and numerous user experience enhancements.

## New Features & Improvements

* **Undo/Redo System**:
    * Full **Undo** (Ctrl+Z) and **Redo** (Ctrl+Y / Ctrl+Shift+Z) functionality has been implemented.
    * Works for both text edits within subtitles and structural changes (Merge, Split, Delete).

* **Subtitle Editing Tools**:
    * **Merge**: Combine the current subtitle with the next one.
    * **Split**: Divide the current subtitle into two at the cursor's position.
    * **Delete**: Remove the current subtitle (with confirmation).
    * **Direct Timecode Editing**: Start and end times can now be directly edited in input fields within each subtitle unit.
    * **Timecode Nudging**: Buttons added to nudge start/end times forward or backward by one frame (40ms).
    * **Video Nudging**: Buttons added to nudge the video playback forward or backward by one frame.
    * **Duration Display**: Each subtitle unit now clearly displays its duration.

* **Project Planner**:
    * A new collapsible panel in the video section allows you to divide the project into manageable sessions.
    * Calculate sessions based on the number of subtitles, word count, or video time.
    * Track time spent on each session with integrated start/pause/reset timers.
    * Includes a final session dedicated to Review/QA.
(Special thanks to Guillermo Parra @guillermosubs for the inspiration behind this feature!)


* **Navigation & UI Enhancements**:
    * **"Go To..." Panel**: A new floating panel allows jumping directly to a specific subtitle number or timecode.
    * **"Tools" Menu**: A new dropdown menu consolidates Undo, Redo, Find & Replace, Shortcuts, and the new "Go To..." function.
    * **"Validate All Previous" Button**: Quickly validate the current subtitle and all preceding unvalidated ones.
    * **Redesigned Video Player Controls**: Controls are now in a sleek top bar that appears on hover, including:
        * Buttons to switch the **Subtitle Preview Overlay** between Original and Translation.
        * Dedicated buttons (+/-) for adjusting **Subtitle Preview Font Size**.
        * A custom **Fullscreen Button** designed for the application.
        * **Adaptive Controls**: The control bar layout adjusts automatically for smaller screen widths.
    * **Floating Find & Replace**: The Find & Replace tool is now a floating, draggable, and resizable panel instead of a modal.
    * **Line Break Tooltip**: A helpful tooltip reminds users that Shift+Enter creates line breaks in the editor (can be dismissed).
    * **Improved Project Menu**: Now includes "Backup" and "Reset Application" options.
    * **Global Video Shortcuts**: Play/pause, seek, and play segment shortcuts now work even when the editor isn't focused.

* **Project Management**:
    * **Enhanced `.subpanda` Format**: Saving a project now correctly bundles *all* data including the session plan from the Planner.
    * **Application Reset**: A new option in the Project menu allows resetting the application completely, clearing all stored data (projects, backups, settings) in the browser.

* **AI Context Assistant**:
    * A new floating panel integrates AI suggestions directly into your workflow.
    * Generate a custom prompt based on your QA settings and additional instructions.
    * Copy the prompt to use with your preferred AI.
    * Import AI-generated JSON data (via file upload or pasting) to display contextual translation suggestions, explanations of idioms/references, and QA compliance notes directly within the panel for the active subtitle.
    * Customize AI prompts via a new settings modal.

* **Code & Stability**:
    * Refactored JavaScript for better organization and performance.
    * Improved handling of editor focus and state updates.
    * Fixed various minor bugs and improved overall stability.


=========================================
subpandaTM v1.0.1 - Glossary workflow improved
=========================================

Release Date: September 14, 2025

This update focuses on improving the glossary workflow and overall application stability based on user feedback.

New Features & Improvements

* **Glossary Context Tooltip: A new context-aware tooltip now appears directly above the active subtitle you are translating. When a term from your glossary is detected in the source text, this tooltip instantly shows its corresponding translation, saving you from looking away to the terminology panel and speeding up your work.

* **Editor Stability and Workflow Fix: A critical issue has been resolved where adding or deleting a term from the glossary would cause the entire subtitle editor to refresh. This interruption not only caused users to lose their scroll position, but also incorrectly reset the confirmed status of already validated subtitles. The update process is now instantaneous, preserving both your position in the editor and the status of all your subtitles for a seamless workflow.

* **Overhauled TMX Export Engine for Professional Compatibility: The TMX export function has been rebuilt from the ground up to generate clean, valid files compliant with the TMX 1.4b standard. This resolves all previously encountered import errors in industry-standard CAT tools, allowing for a seamless workflow between subpandaTM and other platforms.

* **Improved TMX Import and HTML Formatting Preservation: The TMX importer is now more robust and correctly interprets standard-compliant files. Crucially, any HTML formatting tags (like <i> for italics or <br> for line breaks) are now properly handled during both export and import. This means formatting is perfectly preserved when moving TMs between applications, and it will be rendered correctly in the editor, not as plain text.

* **Note on Legacy TMX Files: Due to these improvements, the importer is now stricter and will reject old TMX files that were generated with previous, buggy versions. To upgrade your old TMX files, simply load them into your new version of subpandaTM and re-export them. The new export process will automatically clean and fix the file structure, making them permanently compatible.

Special Thanks
A special thank you to all the students of Damián Santilli's subtitling specialization for their invaluable feedback and suggestions, which were crucial for this update.


=========================================
 subpandaTM v1.0.0 - Launch Announcement
=========================================

Release Date: July 28, 2025

SubpandaTM is an all-in-one subtitle translation environment that runs entirely in your browser. It combines a synchronized video player, a powerful subtitle editor, and professional CAT (Computer-Assisted Translation) tools to streamline your entire workflow, all while keeping your data private and offline.

---
Key Features
---

### Integrated Translation Environment

* **Synchronized Video Player**: Load your video and see it alongside your SRT file. Clicking a subtitle in the editor jumps the video to the correct time, and the video player can be controlled with extensive keyboard shortcuts.
* **Subtitle Preview Overlay**: See how your translation will look on-screen with a live preview overlay on the video player. You can customize the font size and switch between viewing the original or the translated text.
* **Side-by-Side Editor**: A clear editor view showing the original text next to a rich-text field for your translation for each subtitle entry.
* **Real-time QA Checks**: Get instant feedback on your translations. The tool automatically checks for and flags issues related to Characters Per Second (CPS) and characters-per-line limits based on your settings.

### Computer-Assisted Translation (CAT) Tools

* **Translation Memory (TM)**: Import and export standard TMX files or create a TM from scratch. Get fuzzy match suggestions with similarity scores and a color-coded "diff" view that highlights the exact differences between the source text and the TM match.
* **Terminology (Glossary)**: Manage your project's terminology with full TBX import/export support. Terms from your glossary are automatically highlighted in the source text for easy reference.
* **Floating Panels**: The TM and Terminology tools are housed in fully draggable and resizable floating windows, allowing you to create a completely custom workspace.

### Productivity & Workflow

* **Comprehensive Shortcut System**: A massive set of keyboard shortcuts covers nearly every action: video playback, navigating between subtitles, inserting TM and glossary suggestions, and applying text formatting. The entire shortcut map can be customized, saved, and imported.
* **Find & Replace**: A powerful tool to find and replace text across all subtitles in your file, with support for case sensitivity and regular expressions.
* **Statistics Panel**: A collapsible panel keeps track of your progress, showing translated segments, word counts, and a summary of QA errors.

### Project Management & Data Safety

* **Full Project Files (.subpanda)**: Save your entire workspace—including the SRT file, TM, glossary, video reference, and settings—into a single `.subpanda` project file.
* **Automatic Backup**: Your session is automatically backed up to your browser's local storage (IndexedDB) to prevent data loss. The tool will notify you if a restorable backup is available.
* **Multilingual Interface**: The application is available in both English and Spanish.

---
Getting Started
---

1.  Open the `subpandatm.html` file in your web browser.
2.  Click "Import .srt" to load your subtitle file.
3.  Click "Load Video" in the player window to load your video file.
4.  Optionally, open the Terminology and TM panels to load your CAT files.
5.  Start translating!

---
Feedback & Contributions
---

This is the first version of subpandaTM. If you have any suggestions or encounter issues, your feedback is highly welcome.

Thank you for using subpandaTM!
